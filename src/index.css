@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* Light Mode */
        --bg-color: #f8fafc;
        --text-color: #000000;
        --surface-color: #f4f4f5;
        --surface-header: #e4e4e7;
        --border-color: #d4d4d8;
        --accent-color: #4251de;
        --accent-text: #ffffff;
        
        /* High Contrast "Inverse" items (Buttons) */
        --inverse-bg: #000000;
        --inverse-text: #ffffff;

        /* Scrollbar colors */
        --scroll-track: #ffffff;
        --scroll-thumb: #d4d4d8;
        --scroll-hover: #a1a1aa;

        --app-font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;

        /* Legacy variable mappings */
        --status-bar-text-color: var(--text-color);
        --status-bar-bg: var(--bg-color);
        --status-bar-border-color: var(--border-color);
        --status-bar-button-hover-color: var(--surface-header);
        --status-bar-button-text-color: var(--text-color);
        --menu-disabled-text-color: #777777;
        --spinner-color: var(--text-color);
        --input-multi-text-color: var(--text-color);
        --input-multi-bg-color: var(--surface-color);
        --input-multi-selected-text-color: var(--accent-text);
        --input-multi-selected-bg-color: var(--accent-color);
        --hint-hot-spot-bg-color: var(--surface-header);
        --hint-hot-spot-hover-bg-color: var(--surface-color);
        --hint-footer-bg-color: var(--surface-header);
        --difficulty-indicator-bg-color: var(--surface-color);
        --difficulty-indicator-border-color: var(--border-color);
        --difficulty-indicator-label-color: var(--text-color);
        --difficulty-indicator-text-color: var(--text-color);

        /* Sudoku Grid Variables - EXACT ORIGINAL VALUES RESTORED */
        /* --background-color: #f8fafc; */
        --grid-line-color: #000000;
        --grid-line-color-bold: #000000;
        --grid-line-width: 1;
        --grid-line-width-bold: 5;
        --mini-grid-line-color: #aaaaaa;
        --mini-grid-bar-color: #fff1a3;
        --mini-grid-bar-text-color: #333333;
        --given-digit-color: #333333;
        --visited-digit-color: #aaaaaa;
        --paused-digit-color: #00000033;
        --digit-color: #4444dd;
        --pencil-mark-color: #4444dd;
        --error-fill-color: #ff111133;
        --error-text-color: #aa0000;
        --selection-outline-color: #7b9ee1;
        --selected-fill-color: #ffeb7f;
        --matched-fill-color: #659bff44;
        --selected-matched-fill-color: #8bb3ff;
        --solved-digit-color: #4444dd;
        --solved-given-digit-color: #333333;
        --solved-fill-color: #b9ffb9;
        --error-selected-fill-color: #ff8c8c;
        
        --vkbd-bg-fill-color: var(--surface-color);
        --vkbd-button-fill-color: var(--bg-color);
        --vkbd-button-text-color: var(--text-color);
        --vkbd-completed-button-text-color: #00aa00;
        --vkbd-mode-panel-fill-color: var(--surface-header);
        
        --button-bg-color: var(--inverse-bg);
        --button-text-color: var(--inverse-text);

        --cell-bg-1-fill-color: transparent;
        --cell-bg-2-fill-color: #ffb8bc;
        --cell-bg-3-fill-color: #ffd085;
        --cell-bg-4-fill-color: #ffffb6;
        --cell-bg-5-fill-color: #caf9ca;
        --cell-bg-6-fill-color: #f1dbff;
        --cell-bg-7-fill-color: #c8f7ff;
        --cell-bg-8-fill-color: #ffa8d8;
        --cell-bg-9-fill-color: #d7d7d7;
    }

    .dark {
        /* Dark Mode */
        --bg-color: #000000;
        --text-color: #dadada;
        --surface-color: #1b1b1b;
        --surface-header: #3d3d3d;
        --border-color: #363636;
        --accent-color: #4f86ff;
        --accent-text: #ffffff;
        
        /* High Contrast "Inverse" items */
        --inverse-bg: #d6d6d6;
        --inverse-text: #000000;

        /* Scrollbar colors */
        --scroll-track: #000000;
        --scroll-thumb: #333333;
        --scroll-hover: #555555;

        --grid-line-color: #505050;
        --grid-line-color-bold: #a8a8a8;
        --grid-line-width: 2;
        --grid-line-width-bold: 5;
        --mini-grid-line-color: #5a5a5a;
        --mini-grid-bar-color: #dbcf90;
        --mini-grid-bar-text-color: #444444;
        --given-digit-color: #bbbbbb;
        --visited-digit-color: #666666;
        --paused-digit-color: #7b7272;
        --digit-color: #5382e0;
        --pencil-mark-color: #5d86d8;
        --error-fill-color: #60020278;
        --error-text-color: #b33d3d;
        --selection-outline-color: #194699;
        --selected-fill-color: #1d48998a;
        --matched-fill-color: #1d4ea89c;
        --selected-matched-fill-color: #5e96ff8c;
        --solved-digit-color: #5b77ae;
        --solved-given-digit-color: #595959;
        --solved-fill-color: #77e877;
        --error-selected-fill-color: #ff8c8c;
        
        --vkbd-bg-fill-color: var(--surface-color);
        --vkbd-button-fill-color: var(--surface-header);
        --vkbd-button-text-color: var(--text-color);
        --vkbd-completed-button-text-color: #60ac60;
        --vkbd-mode-panel-fill-color: #1a1a1a;

        --button-bg-color: var(--inverse-bg);
        --button-text-color: var(--inverse-text);

        /* Legacy mappings */
        --status-bar-text-color: var(--text-color);
        --status-bar-bg: var(--bg-color);
        --status-bar-border-color: var(--border-color);
        --status-bar-button-hover-color: var(--surface-header);
        --status-bar-button-text-color: var(--text-color);
        --menu-disabled-text-color: #aaaaaa;
        --spinner-color: var(--text-color);
        --input-multi-text-color: var(--text-color);
        --input-multi-bg-color: var(--surface-color);
        --input-multi-selected-text-color: var(--accent-text);
        --input-multi-selected-bg-color: var(--accent-color);
        --hint-hot-spot-bg-color: var(--surface-header);
        --hint-hot-spot-hover-bg-color: var(--surface-color);
        --hint-footer-bg-color: var(--surface-header);
        --difficulty-indicator-bg-color: var(--surface-color);
        --difficulty-indicator-border-color: var(--border-color);
        --difficulty-indicator-label-color: var(--text-color);
        --difficulty-indicator-text-color: var(--text-color);

        --cell-bg-1-fill-color: transparent;
        --cell-bg-2-fill-color: #973838;
        --cell-bg-3-fill-color: #793900;
        --cell-bg-4-fill-color: #777036;
        --cell-bg-5-fill-color: #2f6a2f;
        --cell-bg-6-fill-color: #25267d;
        --cell-bg-7-fill-color: #8c6447;
        --cell-bg-8-fill-color: #7e3158;
        --cell-bg-9-fill-color: #515151;
    }

    html {
        @apply m-0 w-full h-full;
        font-size: 12px;
    }

    @screen md {
        html {
            font-size: 17px;
        }
    }

    body {
        @apply m-0 p-0 w-full h-full touch-none;
        font-family: var(--app-font-family);
        font-size: 1.2rem;
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: background-color 0.3s, color 0.3s;
    }

    #root {
        @apply box-border h-full w-full;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
        @apply w-[10px] h-[10px];
    }
    ::-webkit-scrollbar-track {
        background: var(--scroll-track); 
    }
    ::-webkit-scrollbar-thumb {
        background: var(--scroll-thumb); 
        border: 1px solid var(--bg-color);
    }
    ::-webkit-scrollbar-thumb:hover {
        background: var(--scroll-hover); 
    }

    .theme-transition, .theme-transition * {
        transition-property: background-color, border-color, color, fill, stroke;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 200ms;
    }

    h1, h2, h3, h4, h5, h6 {
        @apply font-normal uppercase tracking-wide;
    }
}

@layer components {
    .retro-link {
        @apply underline transition-all duration-200 cursor-pointer;
    }
    .retro-link:hover {
        background: var(--text-color);
        color: var(--bg-color);
        text-decoration: none;
    }

    /* PRIMARY: High contrast buttons */
    .ui-btn-primary {
        @apply px-6 py-2 bg-theme-inverseBg text-theme-inverseText border border-theme-inverseBg hover:bg-transparent hover:text-theme-text hover:border-theme-text transition-all duration-200 uppercase text-sm font-bold tracking-widest cursor-pointer inline-flex items-center justify-center;
    }

    /* SECONDARY: Outline buttons */
    .ui-btn-secondary {
        @apply px-6 py-2 bg-transparent text-theme-text border border-theme-text hover:bg-theme-inverseBg hover:text-theme-inverseText hover:border-theme-inverseBg transition-all duration-200 uppercase text-sm font-bold tracking-widest cursor-pointer inline-flex items-center justify-center;
    }

    /* ACCENT: The blue action button */
    .ui-btn-accent {
        @apply px-6 py-2 bg-theme-accent text-theme-accentText text-sm font-bold tracking-widest hover:brightness-110 transition-all shadow-sm uppercase cursor-pointer inline-flex items-center justify-center;
    }

    /* Ghost button / Link button */
    .ui-btn-ghost {
        @apply px-4 py-2 text-sm opacity-70 hover:opacity-100 transition-opacity uppercase tracking-widest cursor-pointer;
    }

    .surface-panel {
        @apply border border-theme-border bg-theme-surface shadow-sm;
    }

    .panel-header {
        @apply px-4 py-2 border-b border-theme-border bg-theme-surfaceHeader text-xs font-bold tracking-widest uppercase flex justify-between items-center;
    }

    .sudoku-app {
        @apply w-full h-full select-none flex flex-col;
        background-color: var(--bg-color);
        color: var(--text-color);
    }

    /* Ensure specific grid transitions are disabled for that "crisp" feel if requested */
    .sudoku-grid, .sudoku-grid * {
        transition: none !important;
    }

    .ui-elements {
        @apply w-full h-full flex flex-row flex-nowrap items-center mt-14 justify-center;
    }

    .landscape .ui-elements {
        @apply justify-center gap-4 lg:gap-12;
    }

    .portrait .ui-elements {
        @apply flex-col items-center justify-center mt-20 p-2 px-4 sm:px-8;
    }

    .tab-item {
        @apply px-4 py-2 text-sm uppercase tracking-widest opacity-50 hover:opacity-100 transition-opacity cursor-pointer border-b-2 border-transparent;
    }
    
    .tab-item.active {
        @apply opacity-100 border-theme-text;
        /* Using text-shadow for a bold effect to prevent layout shift (X-size change) */
        text-shadow: 0.5px 0 0 currentColor;
    }

    .app-nav {
        @apply border-b border-theme-border sticky top-0 bg-theme-bg backdrop-blur-sm z-50 py-1;
    }

    .app-nav-inner {
        @apply max-w-[1400px] mx-auto px-5 py-0 flex items-center gap-4;
    }

    .app-nav-left {
        @apply flex-1 flex items-center gap-6;
    }

    .app-nav-center {
        @apply flex-1 flex justify-center items-center;
    }

    .app-nav-right {
        @apply flex-1 flex items-center justify-end gap-3;
    }

    .icon-button {
        @apply w-8 h-8 border border-theme-border bg-theme-surface hover:bg-theme-surfaceHeader transition-colors inline-flex items-center justify-center text-theme-text;
    }

    .button-icon {
        @apply w-7 h-7 fill-current;
    }

    .tag-pill {
        @apply whitespace-nowrap inline-flex items-center gap-2 px-3 py-1 border border-theme-border bg-theme-surface text-sm uppercase tracking-[0.2em];
    }

    .tag-compact {
        @apply inline-flex items-center px-2 py-0.5 border border-theme-border bg-theme-surface text-sm uppercase tracking-wider;
    }

    .menu-panel {
        @apply absolute right-0 top-12 w-64 max-w-[92vw] max-h-[80vh] overflow-y-auto bg-theme-bg border border-theme-border shadow-sm py-2;
    }

    .menu-item {
        @apply block px-4 py-2 text-[11px] uppercase tracking-widest opacity-80 hover:opacity-100 hover:bg-theme-surfaceHeader transition-colors;
    }

    .menu-divider {
        @apply my-2 border-t border-theme-border;
    }
}
