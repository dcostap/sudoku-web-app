.modal-backdrop {
    @apply fixed inset-0 bg-black/50 backdrop-blur-md z-[60] animate-fade-in;
}

.modal-container {
    @apply fixed inset-0 flex items-center justify-center z-[70] p-4;
}

.modal {
    @apply relative max-w-lg w-full max-h-[90vh] overflow-y-auto touch-pan-y p-6 bg-theme-bg border border-theme-border shadow-sm animate-scale-in;
    box-sizing: border-box;
    color: var(--text-color);
}

.modal h1 {
    @apply text-lg mt-0 mb-4 uppercase tracking-widest;
    line-height: 1.4;
}

.modal p {
    @apply text-xs opacity-70 mb-6;
}

.modal .buttons,
.modal .button-group {
    @apply mt-8 flex justify-end gap-3;
}

.modal .primary {
    @apply bg-theme-inverseBg text-theme-inverseText hover:bg-transparent hover:text-theme-text;
}

.modal .secondary,
.modal .cancel {
    @apply bg-theme-bg text-theme-text hover:bg-theme-surfaceHeader;
}

.modal .danger {
    @apply bg-theme-bg text-theme-error border-theme-error;
}

.modal .primary,
.modal .secondary,
.modal .cancel,
.modal .danger {
    @apply px-5 py-2 text-xs uppercase tracking-widest border border-theme-border transition-all duration-100 active:scale-95 inline-block text-center no-underline;
    min-width: 6rem;
}

.modal button:disabled {
    @apply opacity-40 cursor-not-allowed shadow-none active:scale-100;
}

.modal.paste textarea,
.modal.invalid-initial-digits textarea {
    @apply w-full h-32 p-4 text-xs font-mono bg-theme-surface border border-theme-border focus:border-theme-text focus:bg-theme-bg transition-all outline-none resize-none mb-4;
}

.settings-list {
    @apply space-y-4 list-none p-0 m-0;
}

.settings-list li label {
    @apply flex items-center justify-between gap-4 cursor-pointer py-1;
}

.settings-list li .text {
    @apply text-xs uppercase tracking-widest;
}

input.toggle {
    @apply hidden;
}

input.toggle + .indicator {
    @apply relative w-12 h-6 bg-theme-surface rounded-full transition-colors duration-200 border border-theme-border;
}

input.toggle:checked + .indicator {
    @apply bg-theme-inverseBg;
}

input.toggle + .indicator::before {
    @apply content-[''] absolute left-0.5 top-0.5 w-4 h-4 bg-gray-400 rounded-full transition-transform duration-200;
}

input.toggle:checked + .indicator::before {
    @apply translate-x-6 bg-gray-200 dark:bg-gray-900;
}

/* Specific modal sizes */
.modal.welcome, .modal.resume-restart { max-width: 28rem; }
.modal.saved-puzzles { max-width: 32rem; }
.modal.about, .modal.share { max-width: 24rem; }
.modal.check-result { max-width: 26rem; }

/* Check result modal */
.modal.check-result .icon-message {
    @apply flex flex-col items-center text-center space-y-4;
}

.modal.check-result .icon {
    @apply flex items-center justify-center w-16 h-16 rounded-full mb-2;
}

.modal.check-result .check-result-warning {
    @apply bg-amber-100 dark:bg-transparent text-amber-600;
}

.modal.check-result .check-result-error {
    @apply bg-red-100 text-red-600;
}

.modal.check-result .check-result-success {
    @apply bg-green-100 text-green-600;
}

.modal.check-result .icon svg {
    @apply w-10 h-10;
}

.modal.check-result p {
    @apply text-base font-medium;
}

/* Saved puzzles improvements */
.saved-puzzle {
    @apply flex items-center gap-6 p-4 border border-theme-border mb-4 last:mb-0 hover:border-theme-text transition-colors;
}

.puzzle-metadata {
    @apply flex-1 text-sm uppercase tracking-widest opacity-70 space-y-1;
}

.puzzle-metadata th {
    @apply font-bold pr-2 text-left;
}

.puzzle-buttons {
    @apply flex flex-col gap-2;
}

.puzzle-buttons .btn, .puzzle-buttons button {
    @apply py-1.5 px-3 min-w-[5rem] text-xs;
}

/* Feature list */
.feature-list {
    @apply w-full text-sm border-collapse;
}

.feature-list th {
    @apply text-left border-b border-theme-border py-2 uppercase text-sm tracking-widest opacity-60;
}

.feature-list td {
    @apply py-3 border-b border-theme-border;
}

/* Status badges */
.status-badge {
    @apply inline-flex items-center px-1.5 py-0.5 text-sm uppercase tracking-widest border border-theme-border;
}

.status-badge.solved { @apply text-theme-text; }

/* Responsive adjustments */
@media (max-width: 640px) {
    .modal { @apply p-6 rounded-2xl; }
    .saved-puzzle { @apply flex-col items-stretch text-center; }
    .saved-puzzle .sudoku-grid.mini { @apply mx-auto mb-2; }
    .puzzle-metadata { @apply text-center; }
    .puzzle-metadata th { @apply text-center pr-0; }
    .puzzle-buttons { @apply flex-row justify-center mt-4; }
}

.feature-list td {
    vertical-align: top;
}

.feature-list .checkbox-wrapper {
    display: block;
    position: relative;
    width: 2em;
    margin-top: 0.25em;
    padding: 0;
}

.feature-list .description {
    padding: 0.2em 0.4em;
}

.feature-list .issue {
    text-align: right;
    padding-right: 0.6em;
}

.modal.about p {
    max-width: 23em;
}

.modal.share p {
    max-width: 18em;
}

.modal.qr svg {
    display: block;
    margin-left: auto;
    margin-right: auto;
    max-width: 80vw;
    max-height: 80vh;
}

.difficulty-selector p {
    margin-bottom: 0.1em;
}

.difficulty-options input {
    display: none;
}

.difficulty-options {
    display: flex;
    margin: 0.2em 0 0.8em;
    width: 100%;
    font-size: 1.1rem;
}

.difficulty-options label {
    flex: 1 0 auto;
    margin-right: 0.5em;
}

.difficulty-options label:last-child {
    margin-right: 0;
}

.difficulty-options span {
    display: block;
    text-align: center;
    width: 100%;
    padding: 0.2em 0;
    color: var(--input-multi-text-color);
    border: 1px solid var(--input-multi-text-color);
    background-color: var(--input-multi-bg-color);
    border-radius: 0.3em;
}

.difficulty-options input:checked+span {
    color: var(--input-multi-selected-text-color);
    border: 1px solid var(--input-multi-selected-text-color);
    background-color: var(--input-multi-selected-bg-color);
    border-color: var(--input-multi-selected-text-color);
}

.share-time {
    position: relative;
}

.share-time.no-share {
    text-decoration: line-through;
    text-decoration-color: #999999;
}

.share-buttons {
    text-align: center;
}

.share-buttons ul {
    display: inline-block;
    padding: 0;
    margin: 0.5em 0 0 0;
}

.share-buttons li {
    list-style: none;
    margin-bottom: 0.6em;
}

.share-buttons a,
.share-buttons button {
    display: block;
    text-align: left;
    white-space: nowrap;
    background-color: #777777;
    color: #ffffff;
    padding: 0.4em 1em 0.5em 0.5em;
    border-radius: 0.3em;
    /* override browser button font */
    font-family: var(--app-font-family);
    font-weight: bold;
}

.share-buttons a,
.share-buttons a:hover {
    border: none;
}

.share-buttons a::before,
.share-buttons button::before {
    content: '';
    display: inline-block;
    width: 24px;
    height: 24px;
    margin-right: 0.4em;
    vertical-align: bottom;
    border: 1px solid transparent;
    background-image: url(../../assets/social-icons.png);
}

.share-buttons a.btn-facebook {
    background-color: #3b5998;
}

.share-buttons a.btn-twitter {
    background-color: #55acee;
}

.share-buttons a.btn-twitter::before {
    background-position: 0px -25px;
}

.share-buttons a.btn-email::before {
    background-position: 0px -50px;
}

.share-buttons button.btn-qr::before {
    background-position: 0px -75px;
}

.share-buttons button.btn-qr {
    margin-left: 0;
    width: 100%;
}

.solver input[type=checkbox] {
    margin-right: 0.6em;
    vertical-align: text-bottom;
}

.modal.hint {
    height: 100%;
    max-width: 85vw;
    max-height: 90vh;
    padding: 0;
    overflow-y: hidden;
}

.modal.hint.loading,
.modal.hint.loading-failed {
    max-height: 20rem;
}

.hint-layout {
    height: 100%;
    width: 100%;
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr 1.8rem;
}

.hint-body {
    overflow-y: auto;
    padding: 0 1rem;
}

.modal.hint .rc-hot-spot {
    padding: 0 0.15em;
    background-color: var(--hint-hot-spot-bg-color);
    border-radius: 0.15em;
}

.modal.hint .rc-hot-spot:hover {
    background-color: var(--hint-hot-spot-hover-bg-color);
}

.modal .hint-footer {
    background-color: var(--hint-footer-bg-color);
    width: 100%;
    text-align: center;
}

.hint-footer span {
    font-size: 1rem;
    display: inline-block;
    padding: 0.2em;
}

.portrait .modal.hint {
    max-width: 96%;
    max-height: 90%;
}

.landscape .hint-body-layout {
    display: flex;
}

.landscape .sudoku-grid.hint svg {
    width: 60vh;
    max-width: 40vw;
    margin-right: 1.2em;
}

.portrait .sudoku-grid.hint svg {
    height: 50vh;
    max-height: 88vw;
    margin-bottom: 1.2em;
}

.hint-text-wrapper {
    max-width: 40em;
}

.hint-text p {
    margin: 0 0 1.2em 0;
}

.difficulty-indicator {
    float: right;
    margin: 0 0 0.3em 0.8em;
    border-radius: 0.25em;
    background-color: var(--difficulty-indicator-bg-color);
    border: 1px solid var(--difficulty-indicator-border-color);
    display: grid;
    grid-template-areas:
        "title title"
        "value1 value2"
        "label1 label2";
}

.difficulty-indicator>* {
    line-height: 1;
    text-align: center;
    color: var(--difficulty-indicator-label-color);
}

.difficulty-indicator .title {
    grid-area: title;
    font-size: 75%;
    padding: 0.25em;
}

.difficulty-indicator .rating-value {
    font-size: 95%;
    font-weight: 600;
    color: var(--difficulty-indicator-text-color);
}

.difficulty-indicator .rating-value.for-step {
    grid-area: value1;
    padding: 0.06em 0.25em 0 0.4em;
}

.difficulty-indicator .rating-value.for-puzzle {
    grid-area: value2;
    padding: 0.06em 0.3em 0 0.25em;
}

.difficulty-indicator .rating-label {
    font-size: 62%;
}

.difficulty-indicator .rating-label.for-step {
    grid-area: label1;
    padding: 0.15em 0.25em 0.3em 0.5em;
}

.difficulty-indicator .rating-label.for-puzzle {
    grid-area: label2;
    padding: 0.15em 0.5em 0.3em 0.25em;
}

.modal.features .no-features {
    font-style: italic;
}

@media screen and (max-width: 500px) {
    .modal {
        max-width: 94vw;
    }

    .difficulty-options {
        font-size: 4.5vw;
    }
}

@media screen and (max-width: 600px) {

    .modal.resume-restart .saved-puzzle,
    .modal.saved-puzzles .saved-puzzle {
        flex-wrap: wrap;
        margin-bottom: 0.8em;
    }

    .modal.saved-puzzles a.btn,
    .modal.saved-puzzles button {
        font-size: 1rem;
        margin-right: 1.8em;
    }

    .modal.saved-puzzles saved-puzzle:not(.last) .puzzle-metadata {
        order: 3;
        padding-bottom: 0.8em;
        border-bottom: 1px solid var(--hint-footer-bg-color);
    }
}
